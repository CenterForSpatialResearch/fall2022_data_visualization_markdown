<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c1{background-color:#1e1e1e;padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c5{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c10{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c3{font-size:9pt;font-family:"Courier New";color:#b5cea8;font-weight:400}.c0{font-size:9pt;font-family:"Courier New";color:#d4d4d4;font-weight:400}.c2{font-size:9pt;font-family:"Courier New";color:#dcdcaa;font-weight:400}.c12{font-size:9pt;font-family:"Courier New";color:#c586c0;font-weight:400}.c15{font-size:9pt;font-family:"Courier New";color:#569cd6;font-weight:400}.c8{font-size:9pt;font-family:"Courier New";color:#ce9178;font-weight:400}.c6{font-size:9pt;font-family:"Courier New";color:#9cdcfe;font-weight:400}.c11{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c7{text-decoration:none;vertical-align:baseline;font-style:normal}.c14{margin-left:36pt}.c9{height:11pt}.c13{font-weight:700}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c11"><p class="c10"><span class="c5">Please complete part 1: bar and part 2: line before moving onto this section of the module</span></p><p class="c10 c9"><span class="c5"></span></p><p class="c10"><span class="c5">Pie</span></p><p class="c10"><span>Pies are highly debated, and surprisingly controversial in the dataviz world. The visual encoding on pies are generally considered less efficient and accurate than those used by the scatter plot, bar chart, and line chart which all leverage position rather than angle.</span></p><p class="c10 c9"><span class="c4"></span></p><p class="c10"><span class="c5">Setup - step 0</span></p><p class="c10"><span class="c4">We will work with the same 3 files as in the bar section.</span></p><p class="c10 c9"><span class="c4"></span></p><p class="c10 c14"><span class="c13">Index.html </span><span class="c4">- this is where the structure of our webpage will live.</span></p><p class="c10 c14 c9"><span class="c4"></span></p><p class="c10 c14"><span class="c13">D3.js - </span><span class="c4">&nbsp;this is the d3 library&rsquo;s contents. We will not be altering this file at all. We will link this this file to our html file so that we can access its contents and use d3.js methods.</span></p><p class="c10 c14 c9"><span class="c4"></span></p><p class="c10 c14"><span class="c13">charts.js - </span><span>This is the file you will write your javascript code in. It is linked to your index.html file in the same way as the d3.js library file. </span><span class="c5">&nbsp;This file now contains 4 dataset variables, a function for bar charts, and 2 functions for line charts.</span></p><p class="c10 c9 c14"><span class="c5"></span></p><p class="c10"><span class="c5">Pie Chart Step 1</span></p><p class="c10"><span class="c4">We are all familiar with our setup at this point, let&rsquo;s create the function and svg. We will then also call it with set1.</span></p><p class="c1"><span class="c15">function</span><span class="c0">&nbsp;</span><span class="c2">pieChart</span><span class="c0">(</span><span class="c6">data</span><span class="c0 c7">){</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;</span><span class="c15">var</span><span class="c0">&nbsp;</span><span class="c6">svg</span><span class="c0">&nbsp;= </span><span class="c6">d3</span><span class="c0">.</span><span class="c2">select</span><span class="c0">(</span><span class="c8">&quot;#chart&quot;</span><span class="c0">).</span><span class="c2">append</span><span class="c0">(</span><span class="c8">&quot;svg&quot;</span><span class="c0">).</span><span class="c2">attr</span><span class="c0">(</span><span class="c8">&quot;width&quot;</span><span class="c0">,</span><span class="c3">200</span><span class="c0">).</span><span class="c2">attr</span><span class="c0">(</span><span class="c8">&quot;height&quot;</span><span class="c0">,</span><span class="c3">200</span><span class="c0 c7">)</span></p><p class="c1"><span class="c0 c7">}</span></p><p class="c1 c9"><span class="c2 c7"></span></p><p class="c1"><span class="c2">pieChart</span><span class="c0">(</span><span class="c6">set1</span><span class="c0 c7">)</span></p><p class="c10 c9"><span class="c4"></span></p><p class="c10"><span class="c4">A pie chart is created as a path in d3, so our code will resemble the line chart we have already created. Before drawing the path, we need to take the additional step of turning our data values into degree values(radians in this case).</span></p><p class="c10 c9"><span class="c4"></span></p><p class="c10"><span class="c4">Here we are setting up our definition of the pie, we are using the x values in our set1</span></p><p class="c1"><span class="c15">var</span><span class="c0">&nbsp;</span><span class="c6">pie</span><span class="c0">&nbsp;= </span><span class="c6">d3</span><span class="c0">.</span><span class="c2">pie</span><span class="c0 c7">()</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;.</span><span class="c2">value</span><span class="c0">(</span><span class="c15">function</span><span class="c0">(</span><span class="c6">d</span><span class="c0 c7">){</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12">return</span><span class="c0">&nbsp;</span><span class="c6">d</span><span class="c0">.</span><span class="c6 c7">x</span></p><p class="c1"><span class="c0 c7">&nbsp; &nbsp;})</span></p><p class="c10 c9"><span class="c4"></span></p><p class="c10"><span class="c4">We then apply this definition to our data</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;</span><span class="c15">var</span><span class="c0">&nbsp;</span><span class="c6">pieData</span><span class="c0">&nbsp;= </span><span class="c2">pie</span><span class="c0">(</span><span class="c6">data</span><span class="c0">)</span></p><p class="c10"><span class="c4">Before adding it to our svg as a path</span></p><p class="c1"><span class="c6">svg</span><span class="c0">.</span><span class="c2">selectAll</span><span class="c0">(</span><span class="c8">&quot;path&quot;</span><span class="c0 c7">)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;.</span><span class="c2">data</span><span class="c0">(</span><span class="c6">pieData</span><span class="c0 c7">)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;.</span><span class="c2">enter</span><span class="c0 c7">()</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;.</span><span class="c2">append</span><span class="c0">(</span><span class="c8">&#39;path&#39;</span><span class="c0 c7">)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp;.</span><span class="c2">attr</span><span class="c0">(</span><span class="c8">&#39;d&#39;</span><span class="c0">, </span><span class="c6">d3</span><span class="c0">.</span><span class="c2">arc</span><span class="c0 c7">()</span></p><p class="c10"><span class="c4">Although nothing appears in the browser page, we can see that the paths are being drawn when we look at the elements tab of the developer console.</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 645.33px;"><img alt="" src="images/image8.png" style="width: 624.00px; height: 645.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c4">Next let&rsquo;s set a inner and outer radius for our pie to draw them. If we set a inner radius that is larger than 0, then we have created a donuts chart.</span></p><p class="c1"><span class="c0">.</span><span class="c2">innerRadius</span><span class="c0">(</span><span class="c3">0</span><span class="c0 c7">)</span></p><p class="c1"><span class="c0">.</span><span class="c2">outerRadius</span><span class="c0">(</span><span class="c3">100</span><span class="c0 c7">)</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 213.00px; height: 165.00px;"><img alt="" src="images/image4.png" style="width: 213.00px; height: 165.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c4">We have &nbsp;a pie chart, unfortunately its center is set at 0,0 so only a quarter is visible. We will shift it to the right and down by 100 pixels. It is easiest to do this as a whole, so let&rsquo;s add a group and the transform attribute to our svg definition</span></p><p class="c1"><span class="c15">var</span><span class="c0">&nbsp;</span><span class="c6">svg</span><span class="c0">&nbsp;= </span><span class="c6">d3</span><span class="c0">.</span><span class="c2">select</span><span class="c0">(</span><span class="c8">&quot;#chart&quot;</span><span class="c0">).</span><span class="c2">append</span><span class="c0">(</span><span class="c8">&quot;svg&quot;</span><span class="c0">).</span><span class="c2">attr</span><span class="c0">(</span><span class="c8">&quot;width&quot;</span><span class="c0">,</span><span class="c3">200</span><span class="c0">).</span><span class="c2">attr</span><span class="c0">(</span><span class="c8">&quot;height&quot;</span><span class="c0">,</span><span class="c3">200</span><span class="c0 c7">)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c2">append</span><span class="c0">(</span><span class="c8">&quot;g&quot;</span><span class="c0 c7">)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c2">attr</span><span class="c0">(</span><span class="c8">&quot;transform&quot;</span><span class="c0">, </span><span class="c8">&quot;translate(100,100)&quot;</span><span class="c0 c7">) &nbsp;</span></p><p class="c10 c9"><span class="c4"></span></p><p class="c10"><span class="c4">Our whole pie is now visible, although it is hard to distinguish the slices without color coding.</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 227.00px; height: 222.00px;"><img alt="" src="images/image7.png" style="width: 227.00px; height: 222.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c4">First we can set the stroke color and width so the slices have better separation</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;.</span><span class="c2">attr</span><span class="c0">(</span><span class="c8">&quot;stroke&quot;</span><span class="c0">,</span><span class="c8">&quot;white&quot;</span><span class="c0 c7">)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;.</span><span class="c2">style</span><span class="c0">(</span><span class="c8">&quot;stroke-width&quot;</span><span class="c0">, </span><span class="c8">&quot;2px&quot;</span><span class="c0 c7">)</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 235.00px; height: 231.00px;"><img alt="" src="images/image3.png" style="width: 235.00px; height: 231.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10 c9"><span class="c4"></span></p><p class="c10"><span class="c4">Next let&rsquo;s introduce some colors.</span></p><p class="c10"><span class="c4">Here is an array of hex color values that we can assign to slices</span></p><p class="c1"><span class="c15">var</span><span class="c0">&nbsp;</span><span class="c6">colors</span><span class="c0">&nbsp;= [</span><span class="c8">&quot;#53e2e8&quot;</span><span class="c0">,</span><span class="c8">&quot;#dce539&quot;</span><span class="c0">,</span><span class="c8">&quot;#4cecbb&quot;</span><span class="c0">,</span><span class="c8">&quot;#f1be47&quot;</span><span class="c0">,</span><span class="c8">&quot;#79e950&quot;</span><span class="c0">,</span><span class="c8">&quot;#f6ac8d&quot;</span><span class="c0">,</span><span class="c8">&quot;#7be98e&quot;</span><span class="c0">,</span><span class="c8">&quot;#e5d17c&quot;</span><span class="c0">,</span><span class="c8">&quot;#8ce1af&quot;</span><span class="c0">,</span><span class="c8">&quot;#d6db66&quot;</span><span class="c0">,</span><span class="c8">&quot;#c2e596&quot;</span><span class="c0">,</span><span class="c8">&quot;#b4e462&quot;</span><span class="c0 c7">]</span></p><p class="c1 c9"><span class="c0 c7"></span></p><p class="c10 c9"><span class="c4"></span></p><p class="c10"><span class="c4">We can use the index value in our data to access these colors.</span></p><p class="c10"><span class="c4">Before we do that, let&rsquo;s take a closer look at exactly what pie data looks like. Let&rsquo;s add a attribute for the fill, but instead of assigning a color right away, we will log the values for d out to the console.</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;.</span><span class="c2">attr</span><span class="c0">(</span><span class="c8">&#39;fill&#39;</span><span class="c0">, </span><span class="c15">function</span><span class="c0">(</span><span class="c6">d</span><span class="c0 c7">){</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">console</span><span class="c0">.</span><span class="c2">log</span><span class="c0">(</span><span class="c6">d</span><span class="c0 c7">)</span></p><p class="c1"><span class="c0 c7">&nbsp; &nbsp; &nbsp; &nbsp;})</span></p><p class="c10 c9"><span class="c4"></span></p><p class="c10"><span class="c4">In the Console tab of your devTools, you will see the data for each slice of pie printed out. Each slice has the data, endAngle, sartAngle, value, and index. </span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 492.50px; height: 509.07px;"><img alt="" src="images/image6.png" style="width: 492.50px; height: 509.07px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c4">Let&rsquo;s use the index value of each slice(d.index) to assign the colors. For clarity we will assign this value to a new variable called sliceIndex.</span></p><p class="c1"><span class="c0">&nbsp;.</span><span class="c2">attr</span><span class="c0">(</span><span class="c8">&#39;fill&#39;</span><span class="c0">, </span><span class="c15">function</span><span class="c0">(</span><span class="c6">d</span><span class="c0 c7">){</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c6">console</span><span class="c0">.</span><span class="c2">log</span><span class="c0">(</span><span class="c6">d</span><span class="c0 c7">)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">var</span><span class="c0">&nbsp;</span><span class="c6">sliceIndex</span><span class="c0">&nbsp;= </span><span class="c6">d</span><span class="c0">.</span><span class="c6 c7">index</span></p><p class="c1"><span class="c0 c7">&nbsp; &nbsp; &nbsp; &nbsp;})</span></p><p class="c1 c9"><span class="c0 c7"></span></p><p class="c10"><span class="c4">Next, we will use the index to access the colors array. So the index of the pie slice will determine which color it gets assigned.</span></p><p class="c1"><span class="c0">&nbsp;.</span><span class="c2">attr</span><span class="c0">(</span><span class="c8">&#39;fill&#39;</span><span class="c0">, </span><span class="c15">function</span><span class="c0">(</span><span class="c6">d</span><span class="c0 c7">){</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c6">console</span><span class="c0">.</span><span class="c2">log</span><span class="c0">(</span><span class="c6">d</span><span class="c0 c7">)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">var</span><span class="c0">&nbsp;</span><span class="c6">sliceIndex</span><span class="c0">&nbsp;= </span><span class="c6">d</span><span class="c0">.</span><span class="c6 c7">index</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c6">colors</span><span class="c0">[</span><span class="c6">sliceIndex</span><span class="c0 c7">]</span></p><p class="c1"><span class="c0 c7">&nbsp; &nbsp; &nbsp; &nbsp;})</span></p><p class="c10"><span class="c4">When you save this last change, we can see that the pie chart is still black. There is a bug, can you see what it is? </span></p><p class="c10"><span class="c4">We are missing the return statement. </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp;.</span><span class="c2">attr</span><span class="c0">(</span><span class="c8">&#39;fill&#39;</span><span class="c0">, </span><span class="c15">function</span><span class="c0">(</span><span class="c6">d</span><span class="c0 c7">){</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c6">console</span><span class="c0">.</span><span class="c2">log</span><span class="c0">(</span><span class="c6">d</span><span class="c0 c7">)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15">var</span><span class="c0">&nbsp;</span><span class="c6">sliceIndex</span><span class="c0">&nbsp;= </span><span class="c6">d</span><span class="c0">.</span><span class="c6 c7">index</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c12">return</span><span class="c0">&nbsp;</span><span class="c6">colors</span><span class="c0">[</span><span class="c6">sliceIndex</span><span class="c0 c7">]</span></p><p class="c1"><span class="c0 c7">&nbsp; &nbsp; &nbsp; &nbsp;})</span></p><p class="c10 c9"><span class="c4"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 209.00px; height: 215.00px;"><img alt="" src="images/image9.png" style="width: 209.00px; height: 215.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c4">Now that our pie chart is somewhat complete, what do we think of how it has represented the data?</span></p><p class="c10"><span class="c4">Perhaps drawing out the whole set will help. Here are our 4 x value pies.</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 170.67px;"><img alt="" src="images/image1.png" style="width: 624.00px; height: 170.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c4">And our y value pies.</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 166.67px;"><img alt="" src="images/image5.png" style="width: 624.00px; height: 166.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c4">These are pretty difficult to decipher for this dataset. What would be a good dataset to map a pie to?</span></p><p class="c10 c9"><span class="c4"></span></p><p class="c10 c9"><span class="c4"></span></p><p class="c10"><span class="c4">Take a look back at all 4 types of charts from this and the last module and consider what basic chart type you would use to make your point with this data.</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 186.67px;"><img alt="" src="images/image2.png" style="width: 624.00px; height: 186.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></body></html>
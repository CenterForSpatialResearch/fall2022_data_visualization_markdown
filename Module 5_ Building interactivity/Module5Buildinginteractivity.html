<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c1{-webkit-text-decoration-skip:none;color:#000000;font-weight:400;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-size:11pt;font-family:"Arial";font-style:normal}.c3{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c5{background-color:#1e1e1e;padding-top:0pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c10{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c8{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c9{font-size:9pt;font-family:"Courier New";color:#ce9178;font-weight:400}.c14{color:#000000;font-weight:700;font-size:11pt;font-family:"Arial"}.c7{font-size:9pt;font-family:"Courier New";color:#dcdcaa;font-weight:400}.c11{font-size:9pt;font-family:"Courier New";color:#c586c0;font-weight:400}.c2{font-size:9pt;font-family:"Courier New";color:#d4d4d4;font-weight:400}.c16{font-size:9pt;font-family:"Courier New";color:#b5cea8;font-weight:400}.c0{font-size:9pt;font-family:"Courier New";color:#9cdcfe;font-weight:400}.c4{font-size:9pt;font-family:"Courier New";color:#569cd6;font-weight:400}.c17{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c6{text-decoration:none;vertical-align:baseline;font-style:normal}.c18{color:inherit;text-decoration:inherit}.c12{margin-left:36pt}.c13{height:11pt}.c15{font-weight:700}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c17"><p class="c10"><span class="c14 c6">States of interactivity</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">Making data interactive is where d3.js really shines. In this module we will add 3 instances of interactivity. We will start by changing the fill color of a rectangle when the mouse interacts with it. Then we will create popup text by using the browser default for tooltips, as well as by using svg text with selectors.</span></p><p class="c10 c13"><span class="c14 c6"></span></p><p class="c10"><span class="c3">D3 has an extensive built-in set of behaviors that can trigger transformations on the page. The most basic are mouse interactivity - rolling the mouse over an element on the page, rolling off the element, and clicking on an element. We will be focusing on these in this module.</span></p><p class="c10 c13"><span class="c14 c6"></span></p><p class="c10"><span class="c6 c14">Step 0. Setup</span></p><p class="c10"><span class="c3">Download the files for module 5 from the fall 2022 course github repository. </span></p><p class="c10"><span class="c8"><a class="c18" href="https://www.google.com/url?q=https://github.com/CenterForSpatialResearch/fall2022_data_visualization/tree/main/module2_anscombe&amp;sa=D&amp;source=editors&amp;ust=1651776781671570&amp;usg=AOvVaw0-1qZZVAhDauNYWZDaBe5n">https://github.com/CenterForSpatialResearch/fall2022_data_visualization/tree/main/module2_anscombe</a></span></p><p class="c10 c13"><span class="c1"></span></p><p class="c10"><span class="c3">Inside you will find 3 files that you should be familiar with from the setup module.</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10 c12"><span class="c15">Index.html </span><span>- this is where the structure of our webpage will live. We will create &ldquo;div&rdquo; objects by hand inside this html file to place our charts. </span><span class="c15">To start, this is a blank template.</span></p><p class="c10 c12 c13"><span class="c3"></span></p><p class="c10 c12"><span class="c15">D3.js - </span><span class="c3">&nbsp;this is the d3 library file, we are using version 6. We will not be altering this file at all. We will link this file to our html file so that we can access its contents and use d3.js methods.</span></p><p class="c10 c12 c13"><span class="c3"></span></p><p class="c10 c12"><span class="c15">charts.js - </span><span>This is the file you will write your javascript code in. It will be linked to your Index.html file in the same way as the d3.js library file. </span><span class="c14 c6">To start, this file contains the set1 data as a variable, a bar chart function we wrote previously(with a few adjustments on size), and a function call to that bar chart function. </span></p><p class="c10 c12 c13"><span class="c14 c6"></span></p><p class="c10 c12"><span class="c14 c6">On the browser page once we go live with our page, we can see a bar chart for the y values of set1.</span></p><p class="c10 c13"><span class="c14 c6"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 209.92px; height: 186.50px;"><img alt="" src="images/image5.png" style="width: 209.92px; height: 186.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c14 c6">This selections</span></p><p class="c10"><span class="c3">Let&rsquo;s start by adding an event to our rectangles. We can choose to continue the chain here with .on</span></p><p class="c5"><span class="c0">svg</span><span class="c2">.</span><span class="c7">selectAll</span><span class="c2">(</span><span class="c9">&quot;rect&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">data</span><span class="c2">(</span><span class="c0">data</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">enter</span><span class="c2 c6">()</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">append</span><span class="c2">(</span><span class="c9">&quot;rect&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;y&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(</span><span class="c0">d</span><span class="c2">){</span><span class="c11">return</span><span class="c2">&nbsp;</span><span class="c16">200</span><span class="c2">-</span><span class="c7">yScale</span><span class="c2">(</span><span class="c0">d</span><span class="c2">[</span><span class="c0">columnInUse</span><span class="c2 c6">])})</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;width&quot;</span><span class="c2">,</span><span class="c16">18</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;x&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(</span><span class="c0">d</span><span class="c2">,</span><span class="c0">i</span><span class="c2">){</span><span class="c11">return</span><span class="c2">&nbsp;</span><span class="c0">i</span><span class="c2">*</span><span class="c16">20</span><span class="c2 c6">&nbsp;})</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;height&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(</span><span class="c0">d</span><span class="c2">){</span><span class="c11">return</span><span class="c2">&nbsp;</span><span class="c7">yScale</span><span class="c2">(</span><span class="c0">d</span><span class="c2">[</span><span class="c0">columnInUse</span><span class="c2 c6">]) })</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;fill&quot;</span><span class="c2">,</span><span class="c0">fillColor</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">on</span><span class="c2">(</span><span class="c9">&quot;mouseover&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(</span><span class="c0">e</span><span class="c2 c6">){</span></p><p class="c5"><span class="c2 c6">&nbsp; &nbsp; &nbsp; </span></p><p class="c5"><span class="c2 c6">&nbsp; &nbsp;})</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">We can also start a new chain by selecting the rectangles.</span></p><p class="c5"><span class="c2">&nbsp;</span><span class="c0">svg</span><span class="c2">.</span><span class="c7">selectAll</span><span class="c2">(</span><span class="c9">&quot;rect&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">data</span><span class="c2">(</span><span class="c0">data</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">enter</span><span class="c2 c6">()</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">append</span><span class="c2">(</span><span class="c9">&quot;rect&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;y&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(</span><span class="c0">d</span><span class="c2">){</span><span class="c11">return</span><span class="c2">&nbsp;</span><span class="c16">200</span><span class="c2">-</span><span class="c7">yScale</span><span class="c2">(</span><span class="c0">d</span><span class="c2">[</span><span class="c0">columnInUse</span><span class="c2 c6">])})</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;width&quot;</span><span class="c2">,</span><span class="c16">18</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;x&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(</span><span class="c0">d</span><span class="c2">,</span><span class="c0">i</span><span class="c2">){</span><span class="c11">return</span><span class="c2">&nbsp;</span><span class="c0">i</span><span class="c2">*</span><span class="c16">20</span><span class="c2 c6">&nbsp;})</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;height&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(</span><span class="c0">d</span><span class="c2">){</span><span class="c11">return</span><span class="c2">&nbsp;</span><span class="c7">yScale</span><span class="c2">(</span><span class="c0">d</span><span class="c2">[</span><span class="c0">columnInUse</span><span class="c2 c6">]) })</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;fill&quot;</span><span class="c2">,</span><span class="c0">fillColor</span><span class="c2 c6">)</span></p><p class="c5 c13"><span class="c2 c6"></span></p><p class="c5 c13"><span class="c2 c6"></span></p><p class="c5"><span class="c2">&nbsp;</span><span class="c0">d3</span><span class="c2">.</span><span class="c7">selectAll</span><span class="c2">(</span><span class="c9">&quot;rect&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">on</span><span class="c2">(</span><span class="c9">&quot;mouseover&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(</span><span class="c0">e</span><span class="c2 c6">){</span></p><p class="c5 c13"><span class="c2 c6"></span></p><p class="c5"><span class="c2 c6">&nbsp; &nbsp;})</span></p><p class="c5 c13"><span class="c0 c6"></span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">Inside our rollover, select the &nbsp;element we are currently working with using &ldquo;this&rdquo;.</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;</span><span class="c0">d3</span><span class="c2">.</span><span class="c7">selectAll</span><span class="c2">(</span><span class="c9">&quot;rect&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">on</span><span class="c2">(</span><span class="c9">&quot;mouseover&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(</span><span class="c0">e</span><span class="c2 c6">){</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">d3</span><span class="c2">.</span><span class="c7">select</span><span class="c2">(</span><span class="c4">this</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2 c6">&nbsp; &nbsp;})</span></p><p class="c10"><span class="c3">Then add a new attribute to &ldquo;this&rdquo;, for example changing the fill color to black.</span></p><p class="c5"><span class="c0">d3</span><span class="c2">.</span><span class="c7">selectAll</span><span class="c2">(</span><span class="c9">&quot;rect&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">on</span><span class="c2">(</span><span class="c9">&quot;mouseover&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(</span><span class="c0">e</span><span class="c2 c6">){</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">d3</span><span class="c2">.</span><span class="c7">select</span><span class="c2">(</span><span class="c4">this</span><span class="c2">).</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;fill&quot;</span><span class="c2">,</span><span class="c9">&quot;black&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2 c6">&nbsp; &nbsp;})</span></p><p class="c10"><span class="c3">Once you save, the rectangle elements will turn black if the mouse rolls over them. </span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 274.30px; height: 255.54px;"><img alt="" src="images/image6.png" style="width: 274.30px; height: 255.54px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">However, when the mouse rolls out of the rectangles, they stay black. To restore their original fill color, we will add another event handler.</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">on</span><span class="c2">(</span><span class="c9">&quot;mouseover&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2 c6">(e){</span></p><p class="c5 c13"><span class="c2 c6"></span></p><p class="c5"><span class="c2 c6">&nbsp; &nbsp;})</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span>And within the mouseout handler, we can reset the fill of &ldquo;this&rdquo; back to the original fill color. This is determined by the variable </span><span>fillColor </span><span class="c3">we passed into the function.</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">on</span><span class="c2">(</span><span class="c9">&quot;mouseover&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2 c6">(e){</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">d3</span><span class="c2">.</span><span class="c7">select</span><span class="c2">(</span><span class="c4">this</span><span class="c2">).</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;fill&quot;</span><span class="c2">,</span><span class="c0">fillColor</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2 c6">&nbsp; &nbsp;})</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">Now when we save, each bar will turn black when the mouse is over it and turn back to its original color when the mouse is no longer over it.</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">The rollover event is also a good place to add text annotations(tooltips) in the form of popup windows that give the viewer more details on your data. There are 2 kinds of tooltips we can use. </span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">The first is a simple tooltip that is a default in the browser. We can simply add a title to our chain, and set that title&rsquo;s content using .text where the text value is the value of the column we have chosen to use to set the height of the bars.</span></p><p class="c5"><span class="c2">&nbsp; .</span><span class="c7">append</span><span class="c2">(</span><span class="c9">&quot;title&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">text</span><span class="c2">(</span><span class="c4">function</span><span class="c2">(</span><span class="c0">d</span><span class="c2 c6">){</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">return</span><span class="c2">&nbsp;</span><span class="c0">d</span><span class="c2">[</span><span class="c0">columnInUse</span><span class="c2 c6">]</span></p><p class="c5"><span class="c2 c6">&nbsp; &nbsp;})</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 210.33px; height: 169.10px;"><img alt="" src="images/image4.png" style="width: 210.33px; height: 169.10px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10"><span class="c3">We can also use additional text here and make the tooltip more descriptive. Here we are simply adding 2 strings together with a + sign.</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">text</span><span class="c2">(</span><span class="c4">function</span><span class="c2">(</span><span class="c0">d</span><span class="c2 c6">){</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c11">return</span><span class="c2">&nbsp;</span><span class="c9">&quot;The value is &quot;</span><span class="c2">+ </span><span class="c0">d</span><span class="c2">[</span><span class="c0">columnInUse</span><span class="c2 c6">]</span></p><p class="c5"><span class="c2 c6">&nbsp; &nbsp;})</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 275.50px; height: 192.06px;"><img alt="" src="images/image7.png" style="width: 275.50px; height: 192.06px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">To make a tooltip with svg, we append a text element to the entire svg, and move it to where our mouse is as we interact with the elements on the page. To get the element&rsquo;s location so that we can place the tooltip correctly, we will use the on mouseover event handler again. We will select &ldquo;this&rdquo; and set new variables to the values of its attributes x and y. </span></p><p class="c10 c13"><span class="c3"></span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">on</span><span class="c2">(</span><span class="c9">&quot;mouseover&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(e,</span><span class="c0">d</span><span class="c2 c6">){</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">d3</span><span class="c2">.</span><span class="c7">select</span><span class="c2">(</span><span class="c4">this</span><span class="c2">).</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;fill&quot;</span><span class="c2">,</span><span class="c9">&quot;black&quot;</span><span class="c2 c6">)</span></p><p class="c5 c13"><span class="c2 c6"></span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">var</span><span class="c2">&nbsp;</span><span class="c0">x</span><span class="c2">&nbsp;= </span><span class="c0">d3</span><span class="c2">.</span><span class="c7">select</span><span class="c2">(</span><span class="c4">this</span><span class="c2">).</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;x&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">var</span><span class="c2">&nbsp;</span><span class="c0">y</span><span class="c2">&nbsp;= </span><span class="c0">d3</span><span class="c2">.</span><span class="c7">select</span><span class="c2">(</span><span class="c4">this</span><span class="c2">).</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;y&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2 c6">&nbsp; &nbsp;})</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">Because we are also using the data in our tooltip, we have 2 inputs in our mouseover function. The first by default is the event, represented usually by e, the 2nd is the data which we use d to represent, and a 3rd possible input here is the index, usually represented by i.</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">on</span><span class="c2">(</span><span class="c9">&quot;mouseover&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(e,</span><span class="c0">d</span><span class="c2 c6">){</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">And then we will append a text element to the svg and set its position with the x and y variables we created. Once again, our text content are set by the y values of set1, d[columnInUse].</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">on</span><span class="c2">(</span><span class="c9">&quot;mouseover&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(e,</span><span class="c0">d</span><span class="c2 c6">){</span></p><p class="c5 c13"><span class="c2 c6"></span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">d3</span><span class="c2">.</span><span class="c7">select</span><span class="c2">(</span><span class="c4">this</span><span class="c2">).</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;fill&quot;</span><span class="c2">,</span><span class="c9">&quot;black&quot;</span><span class="c2 c6">)</span></p><p class="c5 c13"><span class="c2 c6"></span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">var</span><span class="c2">&nbsp;</span><span class="c0">x</span><span class="c2">&nbsp;= </span><span class="c0">d3</span><span class="c2">.</span><span class="c7">select</span><span class="c2">(</span><span class="c4">this</span><span class="c2">).</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;x&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c4">var</span><span class="c2">&nbsp;</span><span class="c0">y</span><span class="c2">&nbsp;= </span><span class="c0">d3</span><span class="c2">.</span><span class="c7">select</span><span class="c2">(</span><span class="c4">this</span><span class="c2">).</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;y&quot;</span><span class="c2 c6">)</span></p><p class="c5 c13"><span class="c2 c6"></span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">svg</span><span class="c2">.</span><span class="c7">append</span><span class="c2">(</span><span class="c9">&quot;text&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c7">text</span><span class="c2">(</span><span class="c0">d</span><span class="c2">[</span><span class="c0">columnInUse</span><span class="c2 c6">])</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;x&quot;</span><span class="c2">,</span><span class="c0">x</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;y&quot;</span><span class="c2">,</span><span class="c0">y</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2 c6">&nbsp; &nbsp;})</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">When we save the code and rollover the bars, the y values will appear.</span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 274.50px; height: 214.05px;"><img alt="" src="images/image3.png" style="width: 274.50px; height: 214.05px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">In order to create the event handler for the text label to disappear we will use on mouseout once again.</span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">on</span><span class="c2">(</span><span class="c9">&quot;mouseout&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(</span><span class="c0">e</span><span class="c2">,</span><span class="c0">d</span><span class="c2 c6">){</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">d3</span><span class="c2">.</span><span class="c7">selectAll</span><span class="c2">(</span><span class="c9">&quot;text&quot;</span><span class="c2">).</span><span class="c7">remove</span><span class="c2 c6">()</span></p><p class="c5"><span class="c2 c6">&nbsp; &nbsp;})</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">Now if we save the page, we can see that the tooltip text does disappear when we rollover to the next bar, but the title of the page &ldquo;y&rdquo; on the left upper corner also disappears. </span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 301.00px; height: 231.00px;"><img alt="" src="images/image2.png" style="width: 301.00px; height: 242.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 275.50px; height: 223.12px;"><img alt="" src="images/image1.png" style="width: 275.50px; height: 244.14px; margin-left: 0.00px; margin-top: -21.03px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">This is because we are removing all text on the page each time. We need a method of isolating only the text in the tooltips and not the title. We do so by setting a class for the rectangle text and not for the title text. A class is an attribute that can be applied to multiple elements on the page to form a group that can be selected later. A class is selected using dot notation. The class we are attributing to the text labels here is &ldquo;tooltip&rdquo;. </span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">svg</span><span class="c2">.</span><span class="c7">append</span><span class="c2">(</span><span class="c9">&quot;text&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c7">text</span><span class="c2">(</span><span class="c0">d</span><span class="c2">[</span><span class="c0">columnInUse</span><span class="c2 c6">])</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;class&quot;</span><span class="c2">,</span><span class="c9">&quot;tooltip&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;x&quot;</span><span class="c2">,</span><span class="c0">x</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;y&quot;</span><span class="c2">,</span><span class="c0">y</span><span class="c2 c6">)</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">We would then select the text using .tooltip. Now when we mouseout of the rectangle, instead of removing all text elements, we will only remove the text with the class tooltip. </span></p><p class="c5"><span class="c2">&nbsp; &nbsp;.</span><span class="c7">on</span><span class="c2">(</span><span class="c9">&quot;mouseout&quot;</span><span class="c2">,</span><span class="c4">function</span><span class="c2">(</span><span class="c0">e</span><span class="c2">,</span><span class="c0">d</span><span class="c2 c6">){</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">d3</span><span class="c2">.</span><span class="c7">selectAll</span><span class="c2">(</span><span class="c9">&quot;.tooltip&quot;</span><span class="c2">).</span><span class="c7">remove</span><span class="c2 c6">()</span></p><p class="c5"><span class="c2 c6">&nbsp; &nbsp;})</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10"><span class="c3">And now we have a working tooltip. Because this is a svg text element, we can style this tooltip with any attributes that we may add to the chart itself using the same syntax. Try out some styles for the text and try adjusting the x and y attributes so that the text placement is more legible. </span></p><p class="c5"><span class="c0">svg</span><span class="c2">.</span><span class="c7">append</span><span class="c2">(</span><span class="c9">&quot;text&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c7">text</span><span class="c2">(</span><span class="c0">d</span><span class="c2">[</span><span class="c0">columnInUse</span><span class="c2 c6">])</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;class&quot;</span><span class="c2">,</span><span class="c9">&quot;tooltip&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;x&quot;</span><span class="c2">,</span><span class="c0">x</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;y&quot;</span><span class="c2">,</span><span class="c0">y</span><span class="c2">-</span><span class="c16">5</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;font-size&quot;</span><span class="c2">,</span><span class="c9">&quot;24px&quot;</span><span class="c2 c6">)</span></p><p class="c5"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp;.</span><span class="c7">attr</span><span class="c2">(</span><span class="c9">&quot;fill&quot;</span><span class="c2">,</span><span class="c9">&quot;red&quot;</span><span class="c2 c6">)</span></p><p class="c10 c13"><span class="c3"></span></p><p class="c10 c13"><span class="c3"></span></p></body></html>